<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>onebone.feature &mdash; onebone  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="onebone.math" href="onebone.math.html" />
    <link rel="prev" title="onebone" href="onebone.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> onebone
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="onebone.html">onebone</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">onebone.feature</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-onebone.feature.correlations">onebone.feature.correlations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-onebone.feature.frequency">onebone.feature.frequency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-onebone.feature.gear">onebone.feature.gear</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-onebone.feature.snr">onebone.feature.snr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-onebone.feature.tacho">onebone.feature.tacho</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-onebone.feature.tacholess">onebone.feature.tacholess</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-onebone.feature.time">onebone.feature.time</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="onebone.math.html">onebone.math</a></li>
<li class="toctree-l2"><a class="reference internal" href="onebone.preprocessing.html">onebone.preprocessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="onebone.signal.html">onebone.signal</a></li>
<li class="toctree-l2"><a class="reference internal" href="onebone.utils.html">onebone.utils</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">onebone</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="onebone.html">onebone</a> &raquo;</li>
      <li>onebone.feature</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/onebone.feature.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="onebone-feature">
<h1>onebone.feature<a class="headerlink" href="#onebone-feature" title="Permalink to this headline"></a></h1>
<section id="module-onebone.feature.correlations">
<span id="onebone-feature-correlations"></span><h2>onebone.feature.correlations<a class="headerlink" href="#module-onebone.feature.correlations" title="Permalink to this headline"></a></h2>
<p>Signal correlation features.</p>
<ul class="simple">
<li><p>Author: Kibum Kim</p></li>
<li><p>Contact: <a class="reference external" href="mailto:kibum&#46;kim&#37;&#52;&#48;onepredict&#46;com">kibum<span>&#46;</span>kim<span>&#64;</span>onepredict<span>&#46;</span>com</a></p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.correlations.phase_alignment">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.correlations.</span></span><span class="sig-name descname"><span class="pre">phase_alignment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#onebone.feature.correlations.phase_alignment" title="Permalink to this definition"></a></dt>
<dd><p>Compute phase alignment(PA) of a set of 1D signals</p>
<div class="math notranslate nohighlight">
\[{PA_{f} = \mid {1 \over n} \sum_j{e^{iw_{j,f}}} \mid }\]</div>
<p>Where <span class="math notranslate nohighlight">\(PA_{f}\)</span> is phase alignment value on frequency <span class="math notranslate nohighlight">\(f\)</span>,
<span class="math notranslate nohighlight">\(n\)</span> is the number of signals, and <span class="math notranslate nohighlight">\(j\)</span> is the index of each signals.
<span class="math notranslate nohighlight">\(w_{j, f}\)</span> denotes phase of signal <span class="math notranslate nohighlight">\(j\)</span> at frequency <span class="math notranslate nohighlight">\(f\)</span>.</p>
<p>This function computes mean vector of unit phase vectors of 1D signals.
This process is repeated for every frequency unit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>y</strong> (<em>numpy.ndarray of shape</em><em> (</em><em>n</em><em>, </em><em>signal_length</em><em>)</em>) – n denotes the number of signals, and each signal shold be 1D time domain.</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em>) – Sample rate. The sample rate is the number of samples per unit time.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>freq</strong> (<em>numpy.ndarray</em>) – Frequency array</p></li>
<li><p><strong>phase_alignment</strong> (<em>numpy.ndarray</em>) – Phase alignment value of each frequency</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="mf">1000.0</span><span class="p">,</span> <span class="mi">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">n</span>  <span class="o">/</span> <span class="n">fs</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signal</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">50.</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mf">80.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">signal</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="n">low</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freq</span><span class="p">,</span> <span class="n">pa_result</span> <span class="o">=</span> <span class="n">phase_alignment</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="module-onebone.feature.frequency">
<span id="onebone-feature-frequency"></span><h2>onebone.feature.frequency<a class="headerlink" href="#module-onebone.feature.frequency" title="Permalink to this headline"></a></h2>
<p>Frequency domain feature.</p>
<ul class="simple">
<li><p>Author: Kangwhi Kim</p></li>
<li><p>Contact: <a class="reference external" href="mailto:kangwhi&#46;kim&#37;&#52;&#48;onepredict&#46;com">kangwhi<span>&#46;</span>kim<span>&#64;</span>onepredict<span>&#46;</span>com</a></p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.frequency.mdf">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.frequency.</span></span><span class="sig-name descname"><span class="pre">mdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdims</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#onebone.feature.frequency.mdf" title="Permalink to this definition"></a></dt>
<dd><p>Compute the median frequency.</p>
<div class="math notranslate nohighlight">
\[{\sum_{j=1}^{MDF} A_{j} = \sum_{j=MDF}^{M} A_{j} = {1 \over 2}\sum_{j=1}^M P_{j}}^{[1]}\]</div>
<p>Where <span class="math notranslate nohighlight">\(A_{j}\)</span> is the amplitude value of spectrum at the frequency bin <span class="math notranslate nohighlight">\(j\)</span>,
and <span class="math notranslate nohighlight">\(M\)</span> is the length of frequency bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>amp</strong> (<em>numpy.ndarray of shape</em><em> (</em><em>signal_length</em><em>,</em><em>)</em><em>, </em><em>(</em><em>n</em><em>, </em><em>signal_length</em><em>)</em>) – The amplitudes of a spectrum of time-domain signals.</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>default=1</em>) – Sample rate. The sample rate is the number of samples per unit time.
If <cite>fs</cite> is 1, then <cite>mdf</cite> is the normalized frequency; (0 ~ 1).</p></li>
<li><p><strong>freq_range</strong> (<em>tuple</em><em>, </em><em>default=None</em>) – Frequency range, specified as a two-element tuple of real values.
If <cite>freq_range</cite> is None, then <cite>mdf</cite> uses the entire bandwidth of the input signal.
That is, <cite>freq_range</cite> is (0, <cite>fs</cite> / 2).</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>default=-1</em>) – Axis along which <cite>mdf</cite> is performed.
The default, <cite>axis`=-1, will calculate the `mdf</cite> along last axis of <cite>x</cite>.
If <cite>axis</cite> is negative, it counts from the last to the first axis.</p></li>
<li><p><strong>keepdims</strong> (<em>bool</em><em>, </em><em>default=False</em>) – If this is set to True, the axes which are reduced are left in the result as dimensions with size one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mdf</strong> (<em>float or numpy.ndarray</em>) – Median frequency.
If <cite>fs</cite> is 1, then <cite>mdf</cite> has units of cycle/sample.
But, if you specify the <cite>fs</cite>, then <cite>mdf</cite> has the same units as <cite>fs</cite>. E.g. cycle/sec.</p>
</dd>
</dl>
<div class="admonition-references admonition">
<p class="admonition-title">References</p>
<dl class="footnote brackets">
<dt class="label" id="id1"><span class="brackets">1</span></dt>
<dd><p>Angkoon Phinyomark, Sirinee Thongpanja, Huosheng Hu,
Pornchai Phukpattaranont and Chusak Limsakul (October 17th 2012).
The Usefulness of Mean and Median Frequencies in Electromyography Analysis,
Computational Intelligence in Electromyography Analysis -
A Perspective on Current Applications and Future Challenges, Ganesh R. Naik, IntechOpen,
DOI: 10.5772/50639. Available from: <a class="reference external" href="https://www.intechopen.com/chapters/40123">https://www.intechopen.com/chapters/40123</a></p>
</dd>
</dl>
</div>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">fs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">x3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mdf</span><span class="p">(</span><span class="n">amp</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
<span class="go">20</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.frequency.mnf">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.frequency.</span></span><span class="sig-name descname"><span class="pre">mnf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdims</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#onebone.feature.frequency.mnf" title="Permalink to this definition"></a></dt>
<dd><p>Compute the mean frequency.</p>
<div class="math notranslate nohighlight">
\[{MNF = {\sum_{j=1}^M f_{j}A_{j} \over \sum_{j=1}^M A_{j}}}^{[1]}\]</div>
<p>Where <span class="math notranslate nohighlight">\(f_{j}\)</span> is the frequency value of spectrum at the bin <span class="math notranslate nohighlight">\(j\)</span>,
<span class="math notranslate nohighlight">\(A_{j}\)</span> is the amplitude value of spectrum at the frequency bin <span class="math notranslate nohighlight">\(j\)</span>,
and <span class="math notranslate nohighlight">\(M\)</span> is the length of frequency bin.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>amp</strong> (<em>numpy.ndarray of shape</em><em> (</em><em>signal_length</em><em>,</em><em>)</em><em>, </em><em>(</em><em>n</em><em>, </em><em>signal_length</em><em>)</em>) – The amplitudes of a spectrum of time-domain signals.</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>default=1</em>) – Sample rate. The sample rate is the number of samples per unit time.
If <cite>fs</cite> is 1, then <cite>mnf</cite> is the normalized frequency; (0 ~ 1).</p></li>
<li><p><strong>freq_range</strong> (<em>tuple</em><em>, </em><em>default=None</em>) – Frequency range, specified as a two-element tuple of real values.
If <cite>freq_range</cite> is None, then <cite>mnf</cite> uses the entire bandwidth of the input signal.
That is, <cite>freq_range</cite> is (0, <cite>fs</cite> / 2).</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>default=-1</em>) – Axis along which <cite>mnf</cite> is performed.
The default, <cite>axis`=-1, will calculate the `mnf</cite> along last axis of <cite>x</cite>.
If <cite>axis</cite> is negative, it counts from the last to the first axis.</p></li>
<li><p><strong>keepdims</strong> (<em>bool</em><em>, </em><em>default=False</em>) – If this is set to True, the axes which are reduced are left in the result as dimensions with size one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>mnf</strong> (<em>float or numpy.ndarray</em>) – Mean frequency.
If <cite>fs</cite> is 1, then <cite>mnf</cite> has units of cycle/sample.
But, if you specify the <cite>fs</cite>, then <cite>mnf</cite> has the same units as <cite>fs</cite>. E.g. cycle/sec.</p>
</dd>
</dl>
<div class="admonition-references admonition">
<p class="admonition-title">References</p>
<dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets">1</span></dt>
<dd><p>Angkoon Phinyomark, Sirinee Thongpanja, Huosheng Hu,
Pornchai Phukpattaranont and Chusak Limsakul (October 17th 2012).
The Usefulness of Mean and Median Frequencies in Electromyography Analysis,
Computational Intelligence in Electromyography Analysis -
A Perspective on Current Applications and Future Challenges, Ganesh R. Naik, IntechOpen,
DOI: 10.5772/50639. Available from: <a class="reference external" href="https://www.intechopen.com/chapters/40123">https://www.intechopen.com/chapters/40123</a></p>
</dd>
</dl>
</div>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">fs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">x3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mnf</span><span class="p">(</span><span class="n">amp</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
<span class="go">20</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.frequency.vcf">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.frequency.</span></span><span class="sig-name descname"><span class="pre">vcf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">amp</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_range</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">-</span> <span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdims</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#onebone.feature.frequency.vcf" title="Permalink to this definition"></a></dt>
<dd><p>Compute the variance of central frequency(mean frequency).</p>
<div class="math notranslate nohighlight">
\[{VCF = {1 \over \sum_{j=1}^M A_{j}}{\sum_{j=1}^M A_{j}(f_{j} - MNF)^2}}^{[1]}\]</div>
<p>Where <span class="math notranslate nohighlight">\(f_{j}\)</span> is the frequency value of spectrum at the bin <span class="math notranslate nohighlight">\(j\)</span>,
<span class="math notranslate nohighlight">\(A_{j}\)</span> is the amplitude value of spectrum at the frequency bin <span class="math notranslate nohighlight">\(j\)</span>,
<span class="math notranslate nohighlight">\(M\)</span> is the length of frequency bin,
<span class="math notranslate nohighlight">\(MNF\)</span> is the mean frequency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>amp</strong> (<em>numpy.ndarray of shape</em><em> (</em><em>signal_length</em><em>,</em><em>)</em><em>, </em><em>(</em><em>n</em><em>, </em><em>signal_length</em><em>)</em>) – The amplitudes of a spectrum of time-domain signals.</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>default=1</em>) – Sample rate. The sample rate is the number of samples per unit time.
If <cite>fs</cite> is 1, then <cite>vcf</cite> is the normalized frequency; (0 ~ 1).</p></li>
<li><p><strong>freq_range</strong> (<em>tuple</em><em>, </em><em>default=None</em>) – Frequency range, specified as a two-element tuple of real values.
If <cite>freq_range</cite> is None, then <cite>vcf</cite> uses the entire bandwidth of the input signal.
That is, <cite>freq_range</cite> is (0, <cite>fs</cite> / 2).</p></li>
<li><p><strong>axis</strong> (<em>int</em><em>, </em><em>default=-1</em>) – Axis along which <cite>vcf</cite> is performed.
The default, <cite>axis`=-1, will calculate the `vcf</cite> along last axis of <cite>x</cite>.
If <cite>axis</cite> is negative, it counts from the last to the first axis.</p></li>
<li><p><strong>keepdims</strong> (<em>bool</em><em>, </em><em>default=False</em>) – If this is set to True, the axes which are reduced are left in the result as dimensions with size one.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>vcf</strong> (<em>float or numpy.ndarray</em>) – Median frequency.
If <cite>fs</cite> is 1, then <cite>vcf</cite> has units of cycle/sample.
But, if you specify the <cite>fs</cite>, then <cite>vcf</cite> has the same units as <cite>fs</cite>. E.g. cycle/sec.</p>
</dd>
</dl>
<div class="admonition-references admonition">
<p class="admonition-title">References</p>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets">1</span></dt>
<dd><p>Angkoon Phinyomark, Sirinee Thongpanja, Huosheng Hu,
Pornchai Phukpattaranont and Chusak Limsakul (October 17th 2012).
The Usefulness of Mean and Median Frequencies in Electromyography Analysis,
Computational Intelligence in Electromyography Analysis -
A Perspective on Current Applications and Future Challenges, Ganesh R. Naik, IntechOpen,
DOI: 10.5772/50639. Available from: <a class="reference external" href="https://www.intechopen.com/chapters/40123">https://www.intechopen.com/chapters/40123</a></p>
</dd>
</dl>
</div>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mi">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">fs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span> <span class="o">+</span> <span class="n">x3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">amp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fft</span><span class="o">.</span><span class="n">fft</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vcf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
<span class="go">66.666</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="module-onebone.feature.gear">
<span id="onebone-feature-gear"></span><h2>onebone.feature.gear<a class="headerlink" href="#module-onebone.feature.gear" title="Permalink to this headline"></a></h2>
<p>Condition metrics for gear.</p>
<ul class="simple">
<li><p>Author: Kyunghwan Kim, Kangwhi Kim</p></li>
<li><p>Contact: <a class="reference external" href="mailto:kyunghwan&#46;kim&#37;&#52;&#48;onepredict&#46;com">kyunghwan<span>&#46;</span>kim<span>&#64;</span>onepredict<span>&#46;</span>com</a>, <a class="reference external" href="mailto:kangwhi&#46;kim&#37;&#52;&#48;onepredict&#46;com">kangwhi<span>&#46;</span>kim<span>&#64;</span>onepredict<span>&#46;</span>com</a></p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.gear.na4">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.gear.</span></span><span class="sig-name descname"><span class="pre">na4</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x_tsa</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prev_info</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rpm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">freq_list</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_harmonics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#onebone.feature.gear.na4" title="Permalink to this definition"></a></dt>
<dd><p>Calculate NA4 metric.</p>
<p>NA4 indicates the onset of damage and continues to react to the damage
as it spreads and increases in magnitude.</p>
<div class="math notranslate nohighlight">
\[{NA4 = {N\sum_{i=1}^N (r_{i}-\bar{r})^4 \over \left\{\frac{1}{M}
\sum_{j=1}^M \left[\sum_{i=1}^N (r_{ij}-\bar{r_j})^2\right] \right\}^2}
= {({\mu}_4)_M \over {\frac{1}{M}\sum_{j=1}^M ({\mu}_2)_j}}}^{[1]}\]</div>
<p>Where <span class="math notranslate nohighlight">\(r\)</span> is residual signal, <span class="math notranslate nohighlight">\(\bar{r}\)</span> is mean value of residual signal,
<span class="math notranslate nohighlight">\(N\)</span> is total number of data points in time record,
<span class="math notranslate nohighlight">\(M\)</span> is current time record in run ensemble,
<span class="math notranslate nohighlight">\(i\)</span> is data point number in time record,
<span class="math notranslate nohighlight">\(j\)</span> is time record number in run ensemble,
<span class="math notranslate nohighlight">\({\mu}_2\)</span> is the 2th central moment of <span class="math notranslate nohighlight">\(r\)</span>,
and <span class="math notranslate nohighlight">\({\mu}_4\)</span> is the 4th central moment of <span class="math notranslate nohighlight">\(r\)</span>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (numpy.ndarray of shape (length of <cite>x</cite>,)) – Time-synchronous-averaged signal (recommended)</p></li>
<li><p><strong>prev_info</strong> (<em>tuple of</em><em> (</em><em>int</em><em>, </em><em>float</em><em>)</em>) – The information for the ‘previous time record number’ in run ensemble.
The first element of <cite>prev_info</cite> is the ‘previous time record number’(M-1).
The second element of <cite>prev_info</cite> is the average of each 2th central moment
of (M-1) previous residual signals. If the current time record number is 1, the <cite>prev_info</cite> is (0, 0).</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em>) – Sampling rate</p></li>
<li><p><strong>rpm</strong> (<em>float</em>) – Revolution per minute. The unit of ‘rpm’ is ‘rev/min’.</p></li>
<li><p><strong>freq_list</strong> (<em>None</em><em> or </em><em>tuple of floats</em><em>, </em><em>default=None</em>) – The frequencies of gear-meshing components.
They are filtered from the ‘x’ signal.</p></li>
<li><p><strong>n_harmonics</strong> (<em>int</em><em>, </em><em>default=2</em>) – A positive integer specifying the number of shaft
and gear meshing frequency harmonics to remove.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>na4</strong> (<em>float</em>) – A metric to not only detect the onset of damage,
but also to continue to react to the damage as it increases.</p></li>
<li><p><strong>cur_info</strong> (<em>tuple of (int, float)</em>) – The information for the ‘current time record number’ in run ensemble.
The first element of <cite>cur_info</cite> is the ‘current time record number’(M).
The second element of <cite>cur_info</cite> is the average of each 2th central moment of M residual signals.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition-references admonition">
<p class="admonition-title">References</p>
<dl class="footnote brackets">
<dt class="label" id="id4"><span class="brackets">1</span></dt>
<dd><p>Zakrajsek, James &amp; Handschuh, Robert &amp; Decker, Harry. (1994).
Application of fault detection techniques to spiral bevel gear fatigue data.
Available from: <a class="reference external" href="https://ntrs.nasa.gov/citations/19940020010">https://ntrs.nasa.gov/citations/19940020010</a></p>
</dd>
</dl>
</div>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rpm</span> <span class="o">=</span> <span class="mi">180</span>                                    <span class="c1"># Revolution per minute</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mf">50e3</span>                                    <span class="c1"># Sampling rate</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">fs</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">fs</span><span class="p">)</span>   <span class="c1"># Sample times</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freq_list</span> <span class="o">=</span> <span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">153</span><span class="p">)</span>                        <span class="c1"># Gear mesh frequencies</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="p">(</span><span class="n">rpm</span><span class="o">/</span><span class="mi">60</span><span class="p">,)</span> <span class="o">+</span> <span class="n">freq_list</span>                    <span class="c1"># Frequencies of signals</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prev_info</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>         <span class="c1"># The information for the &#39;previous time record number&#39; in run ensemble.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_harmonics</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">na4_list</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<blockquote>
<div><p># Assume that the gear condition is getting worse.</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
<span class="go">        # Motor shaft rotation and harmonic</span>
<span class="go">        shaft_signal = np.sin(2 * np.pi * f[0] * t) + np.sin(2 * np.pi * 2 * f[0] * t)</span>
<span class="go">        # Gear mesh vibration and harmonic for a pair of gears</span>
<span class="go">        gm1_signal = 3 * np.sin(2 * np.pi * f[1] * t) + 3 * np.sin(2 * np.pi * 2 * f[1] * t)</span>
<span class="go">        # Gear mesh vibration and harmonic for a pair of gears</span>
<span class="go">        gm2_signal = 4 * np.sin(2 * np.pi * f[2] * t) + 4 * np.sin(2 * np.pi * 2 * f[2] * t)</span>
<span class="go">        # Fault component signal</span>
<span class="go">        fault_signal = 2 * (k / 6) * np.sin(2 * np.pi * 10 * f[0] * t)</span>
<span class="go">        # New signal is the sum of gm1_signal, gm2_signal, and fault_signal.</span>
<span class="go">        new_signal = shaft_signal + gm1_signal + gm2_signal + fault_signal</span>
</pre></div>
</div>
<blockquote>
<div><p># Calculate NA4
<a href="#id6"><span class="problematic" id="id7">na4_</span></a>, cur_info = na4(new_signal, prev_info, fs, rpm, freq_list, n_harmonics)
prev_info = cur_info
na4_list.append(<a href="#id8"><span class="problematic" id="id9">na4_</span></a>)</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">na4_list</span><span class="p">)</span>
<span class="go">[1.536982703280907, 3.857738227803903, 5.590250485891509, 6.835250547872656, 7.755227746173137,</span>
<span class="go"> 8.457654233606695, 9.009683995782796, 9.454160950683573, 9.819352835339927, 10.12454304712786]</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="module-onebone.feature.snr">
<span id="onebone-feature-snr"></span><h2>onebone.feature.snr<a class="headerlink" href="#module-onebone.feature.snr" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.snr.snr">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.snr.</span></span><span class="sig-name descname"><span class="pre">snr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nperseg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">256</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noverlap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">32</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#onebone.feature.snr.snr" title="Permalink to this definition"></a></dt>
<dd><p>Extract the SNR(Signal-to-Noise-Ratio) feature from the signal using the ‘STFT’.
SNR is the ratio between max power intensity of frequency and power of other frequencies
at time t in the STFT spectrum.</p>
<div class="math notranslate nohighlight">
\[P_{signal}(t) = max(|STFT(t,f)|)\]</div>
<div class="math notranslate nohighlight">
\[SNR(t) = {P_{signal}(t) \over {\sum_{f}|STFT(t,f)|} - P_{signal}(t)}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy.ndarray</em>) – 1d-signal data. Must be real.</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em>) – Sampling rate.</p></li>
<li><p><strong>nperseg</strong> (<em>int</em><em>, </em><em>default=256</em>) – Length of each segment.</p></li>
<li><p><strong>noverlap</strong> (<em>int</em><em>, </em><em>default=32</em>) – Number of points to overlap between segments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>snr</strong> (<em>numpy.ndarray</em>) – SNR of the <cite>x</cite>, 1d-array.</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mf">1000.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">fs</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="mf">10.0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">20.0</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">snr_array</span> <span class="o">=</span> <span class="n">snr_feature</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">fs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<ol class="arabic simple">
<li><p>Get a snr array by using snr_feature for one of given signals.</p></li>
<li><p>Make the segments of snr array and get the mean of each segment.</p></li>
<li><p>Compare the mean of SNR between normal states and fault states.         e.g. SNR_fault = np.mean(SNR_fault_array), SNR_normal = np.mean(SNR_normal_array)</p></li>
<li><p>Typically, SNR_fault is smaller than SNR_normal.</p></li>
</ol>
</div>
</dd></dl>

</section>
<section id="module-onebone.feature.tacho">
<span id="onebone-feature-tacho"></span><h2>onebone.feature.tacho<a class="headerlink" href="#module-onebone.feature.tacho" title="Permalink to this headline"></a></h2>
<p>Convert tacho to angle or RPM.</p>
<ul class="simple">
<li><p>Author: Kangwhi Kim</p></li>
<li><p>Contact: <a class="reference external" href="mailto:kangwhi&#46;kim&#37;&#52;&#48;onepredict&#46;com">kangwhi<span>&#46;</span>kim<span>&#64;</span>onepredict<span>&#46;</span>com</a></p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.tacho.tacho_to_angle">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.tacho.</span></span><span class="sig-name descname"><span class="pre">tacho_to_angle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_levels_trh</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices_trh</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pulses_per_rev</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#onebone.feature.tacho.tacho_to_angle" title="Permalink to this definition"></a></dt>
<dd><p>Extract angle signal from tachometer pulses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy.ndarray</em>) – Tachometer pulse signal(1-D).</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em>) – Sample rate.</p></li>
<li><p><strong>state_levels_trh</strong> (<em>int</em><em> or </em><em>float</em>) – The difference between state levels used to identify pulses.
(The state levels used to identify pulses.)</p></li>
<li><p><strong>indices_trh</strong> (<em>int</em><em>, </em><em>default=2</em>) – The difference between indices of the first samples of high-level-state of pulses.</p></li>
<li><p><strong>pulses_per_rev</strong> (<em>int</em><em>, </em><em>default=1</em>) – Number of tachometer pulses per revolution.</p></li>
<li><p><strong>output_fs</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>default=None</em>) – Output sample rate. When the default is None, the <cite>output_fs</cite> is the <cite>fs</cite>.</p></li>
<li><p><strong>fit_type</strong> (<em>str</em><em>, </em><em>default=&quot;linear&quot;</em>) – Fitting method</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>angle</strong> (<em>numpy.ndarray</em>) – Rotational angle(1-D).</p></li>
<li><p><strong>t</strong> (<em>numpy.ndarray</em>) – Time(1-D) expressed in seconds.</p></li>
<li><p><strong>tp</strong> (<em>numpy.ndarray</em>) – Pulse locations(1-D) expressed in seconds.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">state_levels_trh</span> <span class="o">=</span> <span class="mf">0.5</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">angle</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">tacho_to_angle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span> <span class="n">state_levels_trh</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">angle</span>
<span class="go">array([-6.28318531e+00, -4.18879020e+00, -2.09439510e+00,  1.16262283e-15,</span>
<span class="go">       2.09439510e+00,  4.18879020e+00,  6.28318531e+00,  8.37758041e+00,</span>
<span class="go">       1.04719755e+01,  1.25663706e+01])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tp</span>
<span class="go">array([0.3, 0.6, 0.9])</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.tacho.tacho_to_rpm">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.tacho.</span></span><span class="sig-name descname"><span class="pre">tacho_to_rpm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_levels_trh</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices_trh</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pulses_per_rev</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fit_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'linear'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#onebone.feature.tacho.tacho_to_rpm" title="Permalink to this definition"></a></dt>
<dd><p>Extract RPM signal from tachometer pulses.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy.ndarray</em>) – Tachometer pulse signal(1-D).</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em>) – Sample rate.</p></li>
<li><p><strong>state_levels_trh</strong> (<em>int</em><em> or </em><em>float</em>) – The difference between state levels used to identify pulses.
(The state levels used to identify pulses.)</p></li>
<li><p><strong>indices_trh</strong> (<em>int</em><em>, </em><em>default=2</em>) – The difference between indices of the first samples of high-level-state of pulses.</p></li>
<li><p><strong>pulses_per_rev</strong> (<em>int</em><em>, </em><em>default=1</em>) – Number of tachometer pulses per revolution.</p></li>
<li><p><strong>output_fs</strong> (<em>int</em><em> or </em><em>float</em><em>, </em><em>default=None</em>) – Output sample rate. When the default is None, the <cite>output_fs</cite> is the <cite>fs</cite>.</p></li>
<li><p><strong>fit_type</strong> (<em>str</em><em>, </em><em>default=&quot;linear&quot;</em>) – Fitting method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>rpm</strong> (<em>numpy.ndarray</em>) – Rotational speed(1-D).</p></li>
<li><p><strong>t</strong> (<em>numpy.ndarray</em>) – Time(1-D) expressed in seconds.</p></li>
<li><p><strong>tp</strong> (<em>numpy.ndarray</em>) – Pulse locations(1-D) expressed in seconds.</p></li>
</ul>
</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">state_levels_trh</span> <span class="o">=</span> <span class="mf">0.5</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rpm</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">tp</span> <span class="o">=</span> <span class="n">tacho_to_rpm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span> <span class="n">state_levels_trh</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rpm</span>
<span class="go">array([200., 200., 200., 200., 200., 200., 200., 200., 200., 200.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tp</span>
<span class="go">array([0.3, 0.6, 0.9])</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="module-onebone.feature.tacholess">
<span id="onebone-feature-tacholess"></span><h2>onebone.feature.tacholess<a class="headerlink" href="#module-onebone.feature.tacholess" title="Permalink to this headline"></a></h2>
<p>Track and extract a instantaneous frequency(IF) profile from vibration signal</p>
<ul class="simple">
<li><p>Author: Kangwhi Kim</p></li>
<li><p>Contact: <a class="reference external" href="mailto:kangwhi&#46;kim&#37;&#52;&#48;onepredict&#46;com">kangwhi<span>&#46;</span>kim<span>&#64;</span>onepredict<span>&#46;</span>com</a></p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.tacholess.two_step_if">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.tacholess.</span></span><span class="sig-name descname"><span class="pre">two_step_if</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_start</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">f_tol</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_bw</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Tuple</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'hann'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nperseg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">256</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">noverlap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#onebone.feature.tacholess.two_step_if" title="Permalink to this definition"></a></dt>
<dd><p>Track and extract a instantaneous frequency(IF) profile from vibration signal, based on Two-step method.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you have a tachometer pulse signal, use <cite>tacho_to_rpm</cite> function.</p>
</div>
<p><cite>two_step_if</cite> uses the local maxima technique <span class="math notranslate nohighlight">\({}^{[1]}\)</span> for IF estimation, as follows;</p>
<div class="math notranslate nohighlight">
\[\begin{split}f_{max}(t) = \underset{f}{Argmax}{\left|{X(t,f)}\right|}^2,        \quad\mathrm{for}\; f \in \mathit{\Delta}f_t
\\
\\
\mathit{\Delta}f_t \subset \left\{f_{max}(t-d\tau)-\delta f,        \; f_{max}(t-d\tau)+\delta f\right\}\end{split}\]</div>
<p>where, <span class="math notranslate nohighlight">\({\delta f}\)</span> is the given frequency tolerance for maxima detection,
<span class="math notranslate nohighlight">\(X(t,f)\)</span> is the STFT of signal <span class="math notranslate nohighlight">\(x(t)\)</span>
computed for frequency values in set <span class="math notranslate nohighlight">\(\mathit{\Delta}f_t\)</span>,
specified from the previous estimate <span class="math notranslate nohighlight">\(f_{max}(t-d\tau)\)</span>.
tau is time defined as a window position.
Note that for t=0, <span class="math notranslate nohighlight">\(\mathit{\Delta}f_t\)</span> should be given by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (numpy.ndarray of shape (length of <cite>x</cite>, )) – A vibration 1-D signal.</p></li>
<li><p><strong>fs</strong> (<em>int</em><em> or </em><em>float</em>) – Sampling rate. [Hz]</p></li>
<li><p><strong>f_start</strong> (<em>int</em><em> or </em><em>float</em>) – Starting frequency point for the IF estimation. [Hz]</p></li>
<li><p><strong>f_tol</strong> (<em>int</em><em> or </em><em>float</em>) – Frequency tolerance for maxima detection. [Hz]</p></li>
<li><p><strong>filter_bw</strong> (<em>int</em><em> or </em><em>float</em>) – frequency bandwidth for filtration. [Hz]</p></li>
<li><p><strong>window</strong> (<em>str</em><em> or </em><em>tuple</em><em> or </em><em>numpy.ndarray</em><em>, </em><em>default=&quot;hann&quot;</em>) – Desired window to use for <cite>scipy.signal.stft</cite>.
If window is a string or tuple, it is passed to get_window to generate the window values,
which are DFT-even by default. See get_window for a list of windows and required parameters.
If window is array_like it will be used directly as the window
and its length must be nperseg. Defaults to a Hann window.</p></li>
<li><p><strong>nperseg</strong> (<em>int</em><em>, </em><em>default=256</em>) – Length of each segment for <cite>scipy.signal.stft</cite>.</p></li>
<li><p><strong>noverlap</strong> (<em>int</em><em>, </em><em>default=None</em>) – Number of points to overlap between segments.
If None, noverlap = nperseg // 2. Defaults to None.
When specified, the COLA constraint must be met;
i.e. (x.shape[axis] - nperseg) % (nperseg-noverlap) == 0.
For more information, see Notes of <cite>scipy.signal.stft</cite>.</p></li>
<li><p><strong>**kwargs</strong> (<em>dict</em>) – Additional parameters for <cite>scipy.signal.stft</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>inst_freq</strong> (numpy.ndarray of shape (<cite>x.size</cite> - 1,)) – A instantaneous frequency(IF) profile.
For improved results try to manipulate <cite>f_tol</cite> and <cite>f_tol</cite> parameters.
You might also change spectrogram options.</p>
</dd>
</dl>
<div class="admonition-references admonition">
<p class="admonition-title">References</p>
<dl class="footnote brackets">
<dt class="label" id="id5"><span class="brackets">1</span></dt>
<dd><p>Jacek Urbanek, Tomasz Barszcz, Jerome Antoni. (2013).
A two-step procedure for estimation of instantaneous rotational speed with large fluctuations.
<a class="reference external" href="https://doi.org/10.1016/j.ymssp.2012.05.009">https://doi.org/10.1016/j.ymssp.2012.05.009</a>.</p>
</dd>
</dl>
</div>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<p>Generate a test signal, sin wave whose frequency is modulated around 3kHz, corrupted by white noise.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fs</span> <span class="o">=</span> <span class="mf">1e4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mf">1e5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">/</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mod</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">time</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">carrier</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="mf">3e3</span> <span class="o">*</span> <span class="n">time</span> <span class="o">+</span> <span class="n">mod</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">carrier</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">carrier</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">/</span> <span class="mi">5</span>  <span class="c1"># test signal</span>
</pre></div>
</div>
<p>Extract the instantaneous frequency from the signal.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">inst_freq</span> <span class="o">=</span> <span class="n">two_step_if</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">fs</span><span class="p">,</span> <span class="n">f_start</span><span class="o">=</span><span class="mf">3e3</span><span class="p">,</span> <span class="n">f_tol</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">filter_bw</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
<span class="go">window=&#39;hann&#39;, nperseg=4096, noverlap=3985)</span>
</pre></div>
</div>
<p>Plot the instantaneous frequency(IF) profile.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">)</span> <span class="o">/</span> <span class="n">fs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time</span> <span class="o">=</span> <span class="n">time</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">inst_freq</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Estimated the instantaneous frequency(IF) profile&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency [Hz]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time [sec]&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
<section id="module-onebone.feature.time">
<span id="onebone-feature-time"></span><h2>onebone.feature.time<a class="headerlink" href="#module-onebone.feature.time" title="Permalink to this headline"></a></h2>
<p>Signal analysis for the time domain.</p>
<ul class="simple">
<li><p>Author: Kyunghwan Kim</p></li>
<li><p>Contact: <a class="reference external" href="mailto:kyunghwan&#46;kim&#37;&#52;&#48;onepredict&#46;com">kyunghwan<span>&#46;</span>kim<span>&#64;</span>onepredict<span>&#46;</span>com</a></p></li>
</ul>
<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.time.crest_factor">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.time.</span></span><span class="sig-name descname"><span class="pre">crest_factor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#onebone.feature.time.crest_factor" title="Permalink to this definition"></a></dt>
<dd><p>Peak to average ratio along an axis.</p>
<div class="math notranslate nohighlight">
\[crest factor = {|x_{peak}| \over {x_{rms}}}\]</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy.ndarray</em>) – The data.</p></li>
<li><p><strong>axis</strong> (<em>None</em><em> or </em><em>int</em><em>, </em><em>default=None</em>) – Axis along which to calculate crest factor. By default, flatten the array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>crest_factor</strong> (<em>numpy.ndarray</em>) – Peak to average ratio of x.</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crest_factor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([0.39223219, 0.        , 0.97128567, 0.18107148])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crest_factor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([1.12855283, 0.68155412])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crest_factor</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">1.2512223376239555</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.time.kurtosis">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.time.</span></span><span class="sig-name descname"><span class="pre">kurtosis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fisher</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bias</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#onebone.feature.time.kurtosis" title="Permalink to this definition"></a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method uses <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.kurtosis.html">scipy.stats.kurtosis</a> method as it is.</p>
</div>
<p>Compute the kurtosis (Fisher or Pearson) of a signal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy.ndarray</em>) – The data.</p></li>
<li><p><strong>axis</strong> (<em>None</em><em> or </em><em>int</em><em>, </em><em>default=0</em>) – Axis along which the kurtosis is calculated. If None, compute over the whole array a.</p></li>
<li><p><strong>fisher</strong> (<em>bool</em><em>, </em><em>default=True</em>) – If True, Fisher’s definition is used (normal ==&gt; 0.0).
If False, Pearson’s definition is used (normal ==&gt; 3.0).</p></li>
<li><p><strong>bias</strong> (<em>bool</em><em>, </em><em>default=True</em>) – </p></li>
<li><p><strong>False</strong> (<em>If</em>) – </p></li>
<li><p><strong>bias.</strong> (<em>then the calculations are corrected for statistical</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>kurtosis</strong> (<em>numpy.ndarray</em>) – The kurtosis of values along an axis.
If all values are equal, return -3 for Fisher’s definition and 0 for Pearson’s definition.</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kurtosis</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([-2., -3., -2., -2.])</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.time.peak2peak">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.time.</span></span><span class="sig-name descname"><span class="pre">peak2peak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#onebone.feature.time.peak2peak" title="Permalink to this definition"></a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method uses <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ptp.html">numpy.ptp</a> method as it is.</p>
</div>
<p>Maximum to minimum difference along an axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>array_like</em>) – The data.</p></li>
<li><p><strong>axis</strong> (<em>None</em><em> or </em><em>int</em><em>, </em><em>default=None</em>) – Axis along which to find the peaks. By default, flatten the array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>p2p</strong> (<em>numpy.ndarray</em>) – The difference between the maximum and minimum values in x.</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([8, 6])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([2, 0, 5, 2])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ptp</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">10</span>
</pre></div>
</div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="onebone.feature.time.rms">
<span class="sig-prename descclassname"><span class="pre">onebone.feature.time.</span></span><span class="sig-name descname"><span class="pre">rms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#onebone.feature.time.rms" title="Permalink to this definition"></a></dt>
<dd><p>Root mean square along an axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<em>numpy.ndarray</em>) – The data.</p></li>
<li><p><strong>axis</strong> (<em>None</em><em> or </em><em>int</em><em>, </em><em>default=None</em>) – Axis along which to calculate rms. By default, flatten the array.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>rms</strong> (<em>numpy.ndarray</em>) – Root mean square value of x.</p>
</dd>
</dl>
<div class="admonition-examples admonition">
<p class="admonition-title">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
<span class="gp">... </span>              <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rms</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="go">array([ 5.09901951,  9.        ,  5.14781507, 11.04536102])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rms</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([7.08872344, 8.80340843])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rms</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">7.99218368157289</span>
</pre></div>
</div>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="onebone.html" class="btn btn-neutral float-left" title="onebone" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="onebone.math.html" class="btn btn-neutral float-right" title="onebone.math" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Kyunghwan Kim.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>